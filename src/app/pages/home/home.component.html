<div class="home-container">
    <header class="greeting-header">
        <h1>Hello, <strong>{{ userName }}</strong>, what are you planning next?</h1>
        <button mat-raised-button color="accent" routerLink="/map">
            Start New Itinerary
        </button>
    </header>

    <mat-divider></mat-divider>

    <section class="history-container">
        <h3>Previous Itineraries</h3>

        <div *ngIf="(itineraries$ | async) as history; else loading">
            <mat-list *ngIf="history.length > 0; else noData">
                <mat-list-item *ngFor="let item of history">
                    <div mat-line><strong>{{ item.cityId | titlecase }}</strong></div>
                    <div mat-line>{{ item.days }} days â€” Total Est: ${{ item.totalCost }}</div>
                    <button mat-icon-button color="warn" (click)="deleteItem(item.itineraryId)" title="Delete Itinerary">
                        <mat-icon>del</mat-icon>
                    </button>
                    <mat-divider></mat-divider>
                </mat-list-item>
            </mat-list>
        </div>

        <ng-template #noData>
            <p class="placeholder-text">No history found. Your future trips will appear here!</p>
        </ng-template>

        <ng-template #loading>
            <p>Loading your trips...</p>
        </ng-template>
    </section>
</div>